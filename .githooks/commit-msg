#!/bin/bash
# Thin wrapper. Fetches and caches commit-msg.sh from central repo, then runs it.

SCRIPT=".claude-shared/commit-msg.sh"
RAW="https://raw.githubusercontent.com/mvdatacenter/claude-instructions/main/hooks/commit-msg.sh"

if [ ! -f "$SCRIPT" ]; then
    mkdir -p .claude-shared
    TOKEN=$(gh auth token 2>/dev/null)
    curl -sf -H "Authorization: token $TOKEN" "$RAW" -o "$SCRIPT"
fi

[ -f "$SCRIPT" ] && bash "$SCRIPT" "$1"
